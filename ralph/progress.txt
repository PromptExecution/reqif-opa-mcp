## Codebase Patterns
- Ralph workflow: read prd.json → pick highest priority incomplete story → implement → commit → update PRD → append to progress.txt
- Use Python for Ralph automation scripts (issue fetching, prd conversion, archival)
- GitHub CLI (`gh`) used for issue management and PR creation
- Conventional commits format: `<type>(<scope>): <description>` where scope is user story ID
- Archive completed PRDs to ralph/.archive/ with timestamp before starting new work
- Progress learnings should consolidate reusable patterns at the top
- Ralph instructions stored in CLAUDE.md for Claude Code to read

---

## 2026-01-31 16:36 - US-001
- Implemented archive_prd.py script for archiving completed prd.json files
- Files changed: ralph/archive_prd.py (new)
- **Learnings for future iterations:**
  - Archive script validates all user stories have `passes: true` before archiving
  - Filename format: `prd-YYYYMMDD-HHMMSS-project-name.json` (kebab-cased)
  - .archive/ directory already exists and is in .gitignore
  - Used returns module pattern for error handling (will be consistent across Ralph scripts)
  - Type hints with mypy --strict passes, ruff linting passes
  - Script is executable standalone: `python3 ralph/archive_prd.py`
---

## 2026-01-31 17:34 - US-003
- Implemented fetch_github_issue.py script for fetching open GitHub issues
- Files changed: ralph/fetch_github_issue.py (new)
- **Learnings for future iterations:**
  - gh CLI version 2.31.0 doesn't support --order/--sort flags
  - Workaround: fetch more issues (limit 100) and sort in Python by createdAt
  - Script checks for gh CLI installation and authentication before proceeding
  - Exit codes: 0 for success/no issues, 1 for errors
  - Clear error messages guide users to install gh or run `gh auth login`
  - Type hints with mypy --strict passes, ruff linting passes
  - Script outputs issue JSON to stdout for downstream processing
---

## 2026-01-31 18:15 - US-004
- Implemented convert_issue_to_prd.py script for converting GitHub issues to prd.json format
- Files changed: ralph/convert_issue_to_prd.py (new)
- **Learnings for future iterations:**
  - Regex patterns parse user stories from multiple formats: `### US-XXX:`, `**US-XXX:**`, `## US-XXX:`
  - Acceptance criteria extracted from checklist items `- [ ]` and `- [x]`
  - Script merges issue body and all comments for comprehensive parsing
  - If no explicit user stories found, creates single story from issue body
  - Branch naming convention: `gh-issue-{number}-{title-kebab-case}`
  - github_issue property added to prd.json for traceability (number, url, title)
  - Script accepts input from stdin or file path argument
  - Uses subprocess to call `gh repo view` for repository slug
  - Type hints with mypy --strict passes, ruff linting passes
  - Tested with sample issue data - correctly parsed 3 user stories with acceptance criteria
---

## 2026-01-31 17:40 - US-005
- Created comprehensive ralph/README.md documenting Ralph++ workflow
- Files changed: ralph/README.md (new), ralph/check_prd.py (ruff fix)
- **Learnings for future iterations:**
  - README documents complete Ralph++ workflow: local prd → GitHub issues → exit
  - Includes 11 sections: How Ralph Works, Backlog Workflow, Archive Management, Conventional Commits, PR Creation, Progress Logging, Automation Scripts, GitHub Issue Template, Troubleshooting, Quality Requirements, Exit Conditions
  - Archive Management section includes directory structure and ls examples
  - Backlog Workflow explains priority order: local prd.json > GitHub issues > clean exit
  - Fixed ruff linting issues (removed unnecessary f-string prefixes in check_prd.py)
  - Documentation now serves as comprehensive reference for developers and Claude Code
  - All acceptance criteria met: archival steps, backlog workflow, archive management examples
---

