{
  "project": "Ralph++ Workflow Enhancements",
  "branchName": "ralph/ralph-plus-plus",
  "description": "Enhance the Ralph autonomous agent system to automatically transition between completed PRDs and new GitHub issues, creating a continuous workflow until the backlog is clear. Adds archival, GitHub issue integration, automatic PR creation with conventional commits, and treats 'job complete' as when the entire backlog is empty.",
  "userStories": [
    {
      "id": "US-001",
      "title": "Archive completed prd.json files",
      "description": "As Ralph, when I complete all user stories in prd.json, I need to archive it so I can start fresh with the next issue while preserving history.",
      "acceptanceCriteria": [
        "Create `.archive/` directory in ralph/ if it doesn't exist",
        "When all stories have `passes: true`, rename prd.json to `prd-[timestamp]-[project-name].json`",
        "Move renamed file to `.archive/prd-[timestamp]-[project-name].json`",
        "Timestamp format: `YYYYMMDD-HHMMSS` (e.g., `20260131-143022`)",
        "Project name extracted from prd.json `project` field, kebab-cased",
        "Add `.archive/` to .gitignore by default (user can override)",
        "Typecheck passes"
      ],
      "priority": 1,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-002",
      "title": "Check for local prd.json before fetching issues",
      "description": "As Ralph, I need to prioritize local prd.json files over GitHub issues so manual PRDs take precedence.",
      "acceptanceCriteria": [
        "Check if ralph/prd.json exists and is valid JSON",
        "If exists and has incomplete stories (`passes: false`), continue with that PRD",
        "Only attempt GitHub issue fetch if no local prd.json exists",
        "Log decision: 'Found local prd.json with X incomplete stories' or 'No local prd.json, checking GitHub issues'",
        "Typecheck passes"
      ],
      "priority": 2,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-003",
      "title": "Fetch most recent open GitHub issue",
      "description": "As Ralph, when no local prd.json exists, I need to fetch the most recently created open issue so I can work on the latest priorities.",
      "acceptanceCriteria": [
        "Use `gh issue list --state open --limit 1 --json number,title,body,comments,createdAt --order created --sort desc`",
        "If no issues found, exit with message: '✅ BACKLOG CLEAR - All issues completed!'",
        "Extract issue number, title, body, and all comments",
        "Handle `gh` command not found with clear error message",
        "Handle authentication errors with helpful guidance",
        "Typecheck passes"
      ],
      "priority": 3,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-004",
      "title": "Convert GitHub issue to prd.json format",
      "description": "As Ralph, I need to convert a GitHub issue (body + comments) into a valid prd.json so I can execute it using the standard Ralph workflow.",
      "acceptanceCriteria": [
        "Parse issue body for user stories in format `### US-XXX:` or `**US-XXX:**`",
        "Extract acceptance criteria from checklist items `- [ ]` under each user story",
        "Parse all comments for additional requirements or clarifications",
        "Generate prd.json with structure: `{project, branchName, description, userStories[]}`",
        "Branch name format: `gh-issue-[number]-[title-kebab-case]`",
        "Each user story includes: id, title, description, acceptanceCriteria[], priority, passes: false",
        "If no explicit user stories found, create single story from issue body",
        "Add property `github_issue: {number, url, title}` to prd.json for traceability",
        "Typecheck passes"
      ],
      "priority": 4,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-005",
      "title": "Update Ralph instructions with archival workflow",
      "description": "As a developer using Ralph, I need the instructions updated to explain the new archival and GitHub issue workflow.",
      "acceptanceCriteria": [
        "Update ralph/README.md 'How Ralph Works' section with archival steps",
        "Document: 'After completing all stories, prd.json is archived to `.archive/`'",
        "Document: 'Ralph checks for new local prd.json, then GitHub issues, then exits'",
        "Add section 'Backlog Workflow' explaining priority: local prd → GitHub issues → exit",
        "Add section 'Archive Management' explaining .archive/ directory structure",
        "Include example: `ls .archive/` showing timestamped files",
        "Typecheck passes"
      ],
      "priority": 5,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-006",
      "title": "Update CLAUDE.md with Ralph++ workflow",
      "description": "As Claude Code, I need CLAUDE.md updated so I understand the enhanced Ralph workflow when invoked.",
      "acceptanceCriteria": [
        "Add section 'Ralph++ Autonomous Workflow' to CLAUDE.md",
        "Document complete workflow: read prd → implement → archive → fetch issue → convert → repeat",
        "Document exit condition: 'Ralph exits when backlog is clear (no local prd.json, no open issues)'",
        "Document conventional commit requirement for issue completion",
        "Document PR creation requirement when issue completed",
        "Include troubleshooting: gh CLI not installed, authentication issues",
        "Typecheck passes"
      ],
      "priority": 6,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-007",
      "title": "Add conventional commit formatting to Ralph",
      "description": "As Ralph, when I complete a user story, I need to use conventional commit format so the commit history is standardized.",
      "acceptanceCriteria": [
        "Commit message format: `<type>(<scope>): <description>`",
        "Types: feat (new feature), fix (bug fix), docs (documentation), chore (maintenance)",
        "Scope: user story ID (e.g., `feat(US-042): implement health endpoint`)",
        "Description: user story title, max 72 characters",
        "Body includes: user story acceptance criteria summary",
        "Footer includes: `Closes #<issue-number>` if from GitHub issue",
        "Footer includes: `Co-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>`",
        "Typecheck passes"
      ],
      "priority": 7,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-008",
      "title": "Create pull request when issue completed",
      "description": "As Ralph, when I complete all user stories from a GitHub issue, I need to create a PR automatically so the work can be reviewed and merged.",
      "acceptanceCriteria": [
        "After marking last story as `passes: true`, create PR using `gh pr create`",
        "PR title: `feat: <issue-title>` or `fix: <issue-title>` based on content",
        "PR body includes: issue reference `Closes #<number>`, user story summary, test results",
        "PR body template: '## Summary\\n[user stories completed]\\n\\n## Testing\\n[test results]\\n\\nCloses #<number>'",
        "Use branch name from prd.json `branchName` field",
        "Target branch: main or master (auto-detect default branch)",
        "PR created only if on feature branch (not on main/master)",
        "Return PR URL in completion message",
        "Typecheck passes"
      ],
      "priority": 8,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-009",
      "title": "Handle no open issues gracefully",
      "description": "As Ralph, when there are no open GitHub issues and no local prd.json, I need to exit cleanly indicating all work is complete.",
      "acceptanceCriteria": [
        "Check: no ralph/prd.json exists",
        "Check: `gh issue list --state open --limit 1` returns empty",
        "Print: '✅ BACKLOG CLEAR - All issues completed!'",
        "Print: 'Ralph++ has processed all work items. Job complete.'",
        "Exit with code 0 (success)",
        "Log archived PRDs count: 'Completed PRDs archived in .archive/: <count>'",
        "Do NOT enter infinite loop or wait state",
        "Typecheck passes"
      ],
      "priority": 9,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-010",
      "title": "Create GitHub issue template for Ralph compatibility",
      "description": "As a project maintainer, I need a GitHub issue template that structures issues for optimal Ralph conversion.",
      "acceptanceCriteria": [
        "Create `.github/ISSUE_TEMPLATE/ralph-feature.md`",
        "Template includes sections: Problem, Goal, User Stories, Acceptance Criteria",
        "User story format documented: `### US-XXX: Title`",
        "Acceptance criteria format: `- [ ] Specific criterion`",
        "Example issue included in template comments",
        "Template selectable when creating new issue on GitHub",
        "Typecheck passes"
      ],
      "priority": 10,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-011",
      "title": "Add progress.txt update for issue completion",
      "description": "As Ralph, when I complete an issue, I need to append a completion summary to progress.txt before archiving.",
      "acceptanceCriteria": [
        "Append to ralph/progress.txt: `## ISSUE #<number> COMPLETE - <title>`",
        "Include: completion timestamp, total stories, files changed count, PR link",
        "Format: `Completed: YYYY-MM-DD HH:MM:SS`",
        "Include: `PR: <url>` if PR was created",
        "Include: `Branch: <branch-name>` for traceability",
        "Separator line: `---` after each completion entry",
        "Typecheck passes"
      ],
      "priority": 11,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-012",
      "title": "Create ralph-plus-plus fork documentation",
      "description": "As a developer forking Ralph++, I need clear documentation on what changed and how to maintain the fork.",
      "acceptanceCriteria": [
        "Create ralph/FORK.md with fork-specific documentation",
        "Document all changes from base Ralph: archival, issue fetching, PR creation",
        "Include fork sync instructions: `git remote add upstream <base-ralph-repo>`",
        "Document configuration options: .archive/ location, issue labels, PR settings",
        "List files modified from base Ralph for easy diff tracking",
        "Include troubleshooting section for fork-specific issues",
        "Typecheck passes"
      ],
      "priority": 12,
      "passes": false,
      "notes": ""
    }
  ]
}
